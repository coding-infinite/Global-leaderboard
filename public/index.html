<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Global Leaderboard API ‚Äì Docs & Demo Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Poppins, sans-serif;
  background:#0f172a;
  color:#e5e7eb;
}
header{
  padding:45px;
  text-align:center;
  background:linear-gradient(90deg,#2563eb,#9333ea);
}
header h1{margin:0;font-size:34px}
header p{opacity:.9}

section{
  max-width:1100px;
  margin:auto;
  padding:30px;
}
.card{
  background:#111827;
  padding:28px;
  border-radius:18px;
  margin-bottom:30px;
  box-shadow:0 18px 40px rgba(0,0,0,.45);
}
h2{color:#38bdf8;margin-top:0}
pre{
  background:#020617;
  padding:16px;
  border-radius:12px;
  overflow:auto;
}
code{color:#22d3ee}
ul li{margin:10px 0}

input,button{
  width:100%;
  padding:14px;
  border-radius:10px;
  border:none;
  font-size:16px;
  margin-top:12px;
}
input{
  background:#020617;
  color:white;
}
button{
  background:#22c55e;
  font-weight:600;
  cursor:pointer;
}
button:hover{opacity:.9}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th,td{
  padding:12px;
  text-align:left;
}
th{background:#1e293b}
tr:nth-child(even){background:#020617}

footer{
  text-align:center;
  padding:35px;
  opacity:.8;
}
a{color:#60a5fa;text-decoration:none}
</style>
</head>

<body>

<header>
  <h1>üåç Global Leaderboard API</h1>
  <p>Easy Docs ‚Ä¢ Fun Demo Game ‚Ä¢ Beginner Friendly</p>
  <p>By <b>Coding Infinite</b></p>
</header>

<section>

<!-- INTRO -->
<div class="card">
<h2>1Ô∏è‚É£ What is this API?</h2>
<p>
This API helps you create a <b>global leaderboard</b> for any game.
</p>
<ul>
<li>Stores username</li>
<li>Stores maximum score only</li>
<li>Stores country + emoji</li>
<li>Returns sorted leaderboard</li>
<li>No login / no API key</li>
</ul>
</div>

<!-- BASE URL -->
<div class="card">
<h2>2Ô∏è‚É£ API Base URL</h2>
<pre><code>https://global-leaderboard.onrender.com</code></pre>
</div>

<!-- GAME -->
<div class="card">
<h2>3Ô∏è‚É£ Demo Game ‚Äì Click Challenge üéÆ</h2>
<p>
Click anywhere on screen for <b>5 seconds</b>.  
Your total clicks = your score.
</p>

<input id="username" placeholder="Enter your username">
<button onclick="startGame()">Start Game</button>

<p id="gameStatus"></p>
</div>

<!-- LEADERBOARD -->
<div class="card">
<h2>üèÜ Live Leaderboard</h2>
<table>
<thead>
<tr>
<th>Rank</th>
<th>Player</th>
<th>Country</th>
<th>Score</th>
</tr>
</thead>
<tbody id="leaderboard"></tbody>
</table>
</div>

<!-- REGISTER DOC -->
<div class="card">
<h2>4Ô∏è‚É£ Register Player / Send Score</h2>

<p>
<b>Endpoint:</b>
</p>
<pre><code>POST /register</code></pre>

<p>
<b>Data you must send:</b>
</p>

<pre><code>
{
  "username": "Alex",
  "score": 120,
  "country": "India",
  "emoji": "üáÆüá≥"
}
</code></pre>

<p>
<b>Rule:</b> Same username ‚Üí only maximum score saved.
</p>
</div>

<!-- COUNTRY -->
<div class="card">
<h2>5Ô∏è‚É£ How Country & Emoji Works</h2>
<p>
Country is detected in <b>frontend</b> using free IP API.
</p>

<pre><code>
https://ipapi.co/json/
</code></pre>

<p>
Emoji is generated from country code.
</p>
</div>

<!-- GET -->
<div class="card">
<h2>6Ô∏è‚É£ Get Leaderboard Data</h2>
<pre><code>
GET /leaderboard
</code></pre>

<p>
Returns sorted leaderboard array.
</p>
</div>

<!-- USE CASE -->
<div class="card">
<h2>7Ô∏è‚É£ Where You Can Use This API</h2>
<ul>
<li>HTML / JS Games</li>
<li>Mobile Apps</li>
<li>React / Vue</li>
<li>College projects</li>
<li>Practice APIs</li>
</ul>
</div>

<!-- YT -->
<div class="card">
<h2>8Ô∏è‚É£ Learn More</h2>
<p>üì∫ YouTube Channel:</p>
<a href="https://youtube.com/@codinginfinite" target="_blank">
üëâ https://youtube.com/@codinginfinite
</a>
</div>

</section>

<footer>
Made with ‚ù§Ô∏è by Coding Infinite
</footer>

<script>
const API = "https://global-leaderboard.onrender.com";

let clicks = 0;
let playing = false;

// Detect country & emoji
async function getCountryInfo(){
  const res = await fetch("https://ipapi.co/json/");
  const data = await res.json();

  const country = data.country_name || "Unknown";
  const code = data.country_code || "";

  const emoji = code
    ? code.toUpperCase().replace(/./g, c =>
        String.fromCodePoint(127397 + c.charCodeAt())
      )
    : "üåç";

  return { country, emoji };
}

async function startGame(){
  const name = document.getElementById("username").value.trim();
  if(!name){
    alert("Enter username");
    return;
  }

  clicks = 0;
  playing = true;
  document.getElementById("gameStatus").innerText =
    "Game started! Click anywhere for 5 seconds";

  document.body.onclick = () => {
    if(playing) clicks++;
  };

  setTimeout(async () => {
    playing = false;
    document.body.onclick = null;

    const info = await getCountryInfo();

    await fetch(API + "/register", {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify({
        username: name,
        score: clicks,
        country: info.country,
        emoji: info.emoji
      })
    });

    document.getElementById("gameStatus").innerText =
      "Game Over! Your score: " + clicks;

    loadLeaderboard();
  }, 5000);
}

async function loadLeaderboard(){
  const res = await fetch(API + "/leaderboard");
  const data = await res.json();

  const tbody = document.getElementById("leaderboard");
  tbody.innerHTML = "";

  data.forEach((p,i)=>{
    tbody.innerHTML += `
      <tr>
        <td>#${i+1}</td>
        <td>${p.emoji} ${p.username}</td>
        <td>${p.country}</td>
        <td>${p.score}</td>
      </tr>
    `;
  });
}

loadLeaderboard();
</script>

</body>
</html>
